@startuml
import subprocess

!define generate_diagram(input_file, output_format="png")
!define output_file f"output.{output_format}"

!define try_except(subprocess_run)
!define input_file

!define print_success output_file
!define print_error e

start
try_except(
subprocess_run(["plantuml", f"-t{output_format}", f"-o.", input_file], check=True)
)
print_success
print_error
stop
!define-end

!define-end

input_file = "sequence.puml"
generate_diagram(input_file)
@enduml
